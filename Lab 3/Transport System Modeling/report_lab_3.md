# ЛР #3: Алгоритм работы с графами (моделирование транспортной системы)

## Цель

Познакомить студента с инструментами, направленными на решение задач, использующих
графовые модели.

## Задача
Моделирование сложных транспортных процессов города, выявление узких участков, а также
формирование предложений по оптимизации.

**Дано**: На изображении отображены перекрестки, которые рассматривать для решения задачи.
В качестве агентов (автомобилей) и маршрутов их перемещения использовать придуманные
данные, отраженные в отчете по лабораторной работе (предусмотреть часы пик утром и
вечером).

<p align="center">
<img src="https://github.com/khrstln/Algorithms_7_sem/blob/main/Lab%203/images/spb_city.png" alt="SPB City" style="width:60%; border:0;">
</p>

1. **Задача 1: Необходимо определить TOP-10 самых загруженных участков
между перекрестками, а также время на «рассасывание» этого затора.
Отображать такие параметры, как:**
* количество агентов (автомобилей) на участке;
* процент загруженности участка;
* длительность высокой загруженности (более 90%).
2. **Задача 2: С помощью сформированной модели предложить варианты
решения заторов.**
3. **Для задач 1 и 2 рассчитать и обосновать оценку вычислительной и
ёмкостной сложности.**

## Отчет

### Время

1 минута в модели = 1 секунде реального времени

### Часы пик

Часы пик приходятся на 08:00-09:00 и 17:00-18:00 по времени модели. Число генерируемых в час автомобилей в эти промежутки возрастает до 150, в остальное время генерируется 50 автомобилей в час

### Выдуманные маршруты

```python
[1, {"path" : [(0, 3), (3, 7), (7, 6), (6, 9)]}],
[1, {"path" : [(0, 3), (3, 2)]}],
[1, {"path" : [(4, 3)]}],
[1, {"path" : [(11, 7)]}],
[1, {"path" : [(4, 3), (3, 2), (2, 5)]}],
[1, {"path" : [(11, 7), (7, 6), (6, 2), (2, 1)]}],
[1, {"path" : [(10, 7), (7, 6), (6, 8)]}],
[1, {"path" : [(3, 2), (2, 6), (6, 7), (7, 3)]}]
```

Можно видеть, что наиболее часто встречаются участки дорог (7, 6) и (3, 2) - 4 и 3 раза. Соответственно, это будут традиционно наиболее нагруженные участки дорог в рассматриваемом городе.


### Задача 1
**Необходимо определить TOP-10 самых загруженных участков
между перекрестками, а также время на «рассасывание» этого затора.**

Для реализации системы, моделирующей движение транспортного потока, были написаны следующие классы:

* ```python road()``` - класс для хранения дорог
* ```python vehicle()``` - класс для хранения транспортных средств
* ```python trafficLight()``` - класс для хранения сигналов светофоров
* ```python vehicleGenerator()``` - класс для хранения генераторов транспортных средств
* ```python simulator()``` - класс для моделирования движения
* ```python load()``` - класс для хранения информации о загруженности дорог
* ```python window()``` класс для динамической отрисовки модели и вывода информации о загруженности дорог с помощью библиотеки pygame



Не умаляя общности, будем определять TOP-3 самых загруженных участка дорог в текущий момент времени. 
В качестве соответствующей метрики выберем процент загруженности дорог, который вычисляется по следующей формуле

$$
load = \frac{(s_0 + l) \cdot n}{L}
$$

$s_0$ - минимальное безопасное расстояние между автомобилями, $l$ - длина одного автомобиля, $n$ - число автомобилей на участке дороги в текущий момент времени, $L$ - длина участка дороги.

Время на "рассасывание" затора определяется следующим образом: вычисляется время, которое необходимо последней машине в заторе, чтобы доехать до конца участка дороги. Для упрощения модели, считается, что машина движется с максимально возможной скоростью

### Задача 2

**С помощью сформированной модели предложить варианты
решения заторов.**

Транспортные средства, маршрут которых задан таким образом, что он оканчивается не в одной из крайних точек города, случайным образом выбирают следующую дорогу для движения из наиболее свободных дорог

### Задача 3

При решении задачи заторов мы рассматриваем все возможные дороги, исходящие из заданного перекрестка. Таким образом, алгоритм имеет линейную сложность и требует линейных затрат памяти
в зависимости от количества дорог, исходящих из перекрестка.

## Изображение модели

<p align="center">
<img src="https://github.com/khrstln/Algorithms_7_sem/blob/main/Lab%203/images/my_city.png" alt="My City" style="width:60%; border:0;">
</p>
